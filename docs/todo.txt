move input to getch
clean up machine implementation (register finding?)
