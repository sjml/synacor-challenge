clean up machine implementation (register finding?)
have error printing actually go to stderr
change bool sets to use int conversion instead of if
